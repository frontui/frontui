+function(t){function e(e,a){this.$element=t(e),this.option=t.extend({elem:this.$element,event:"focus"},a)}function a(a){return t(this).each(function(){var i=t(this),n=t.extend({},i.data(),a&&"object"==typeof a),s=t(this).data("ui.datetimepicker");s||t(this).data("ui.datetimepicker",s=new e(this,n)),"string"==typeof a&&s[a]()})}var i={skin:"default",format:"YYYY-MM-DD",min:"1900-01-01 00:00:00",max:"2099-12-31 23:59:59",istime:!1},n={},s=t(document.body),o=["laydate_box","laydate_void","laydate_click"],l=function(e){return e=t.extend({},i,e),n.run(e),l};l.v="1.1",n.trim=function(t){return t=t||"",t.replace(/^\s|\s$/g,"").replace(/\s+/g," ")},n.digit=function(t){return 10>t?"0"+(0|t):t},n.stopMosup=function(e,a){"mouseup"!==e&&t(a).on("mouseup",function(t){t.stopPropagation()})},n.run=function(e){var a=e.elem?t(e.elem):null,i=t.Event("show.ui.datetimepicker",{relatedTarge:a});a&&(n.view(a,e),n.reshow(),t(a).trigger(i))},n.scroll=function(t){return t=t?"scrollLeft":"scrollTop",document.body[t]|document.documentElement[t]},n.winarea=function(t){return document.documentElement[t?"clientWidth":"clientHeight"]},n.isleap=function(t){return t%4===0&&t%100!==0||t%400===0},n.checkVoid=function(t,e,a){var i=[];return t=0|t,e=0|e,a=0|a,t<n.mins[0]?i=["y"]:t>n.maxs[0]?i=["y",1]:t>=n.mins[0]&&t<=n.maxs[0]&&(t==n.mins[0]&&(e<n.mins[1]?i=["m"]:e==n.mins[1]&&a<n.mins[2]&&(i=["d"])),t==n.maxs[0]&&(e>n.maxs[1]?i=["m",1]:e==n.maxs[1]&&a>n.maxs[2]&&(i=["d",1]))),i},n.timeVoid=function(t,e){if(n.ymd[1]+1==n.mins[1]&&n.ymd[2]==n.mins[2]){if(0===e&&t<n.mins[3])return 1;if(1===e&&t<n.mins[4])return 1;if(2===e&&t<n.mins[5])return 1}else if(n.ymd[1]+1==n.maxs[1]&&n.ymd[2]==n.maxs[2]){if(0===e&&t>n.maxs[3])return 1;if(1===e&&t>n.maxs[4])return 1;if(2===e&&t>n.maxs[5])return 1}return t>(e?59:23)?1:void 0},n.check=function(){var e,a=n.options.format.replace(/YYYY|MM|DD|hh|mm|ss/g,"\\d+\\").replace(/\\$/g,""),i=new RegExp(a),s=t(n.elem)[o.elemv](),l=s.match(/\d+/g)||[];if(!n.options.format.match(/YYYY/g)){var d=(new Date).getFullYear();l.unshift(d)}if(e=n.checkVoid(l[0],l[1],l[2]),""!==s.replace(/\s/g,"")){if(!i.test(s))return t(n.elem)[o.elemv](""),n.msg("日期不符合格式，请重新选择。"),1;if(e[0])return t(n.elem)[o.elemv](""),n.msg("日期不在有效期内，请重新选择。"),1;if(e.value=n.elem[o.elemv]().match(i).join(),l=e.value.match(/\d+/g),!n.options.format.match(/YYYY/g)){var d=(new Date).getFullYear();l.unshift(d)}l[1]<1?(l[1]=1,e.auto=1):l[1]>12?(l[1]=12,e.auto=1):l[1].length<2&&(e.auto=1),l.length>2&&(l[2]<1?(l[2]=1,e.auto=1):l[2]>n.months[(0|l[1])-1]?(l[2]=31,e.auto=1):l[2].length<2&&(e.auto=1)),l.length>3&&(n.timeVoid(l[3],0)&&(e.auto=1),n.timeVoid(l[4],1)&&(e.auto=1),n.timeVoid(l[5],2)&&(e.auto=1)),e.auto?(console.log(l),n.creation([l[0],0|l[1],0|l[2]],1)):e.value!==n.elem[o.elemv]()&&n.elem[o.elemv](e.value)}},n.months=[31,null,31,30,31,30,31,31,30,31,30,31],n.viewDate=function(e,a,i){var s={},l=new Date;e<(0|n.mins[0])&&(e=0|n.mins[0]),e>(0|n.maxs[0])&&(e=0|n.maxs[0]),l.setFullYear(e,a,i),s.ymd=[l.getFullYear(),l.getMonth(),l.getDate()],n.months[1]=n.isleap(s.ymd[0])?29:28,l.setFullYear(s.ymd[0],s.ymd[1],1),s.FDay=l.getDay(),s.PDay=n.months[0===a?11:a-1]-s.FDay+1,s.NDay=1,t.each(o.tds,function(e,a){var i,l=s.ymd[0],d=s.ymd[1]+1;a.className="",e<s.FDay?(a.innerHTML=i=e+s.PDay,t(a).addClass("laydate_nothis"),1===d&&(l-=1),d=1===d?12:d-1):e>=s.FDay&&e<s.FDay+n.months[s.ymd[1]]?(a.innerHTML=i=e-s.FDay+1,e-s.FDay+1===s.ymd[2]&&(t(a).addClass(o[2]),s.thisDay=a)):(a.innerHTML=i=s.NDay++,t(a).addClass("laydate_nothis"),12===d&&(l+=1),d=12===d?1:d+1),n.checkVoid(l,d,i)[0]&&t(a).addClass(o[1]),n.options.festival&&n.festival(a,d+"."+i),t(a).attr({y:l,m:d,d:i}),l=d=i=null}),n.valid=!t(s.thisDay).hasClass(o[1]),n.ymd=s.ymd,o.year.val(n.ymd[0]+"年"),o.month.val(n.digit(n.ymd[1]+1)+"月"),t.each(o.mms,function(e,a){var i=n.checkVoid(n.ymd[0],(0|t(a).attr("m"))+1);"y"===i[0]||"m"===i[0]?t(a).addClass(o[1]):t(a).removeClass(o[1]),t(a).removeClass(o[2]),i=null}),t(o.mms[n.ymd[1]]).addClass(o[2]),s.times=[0|n.inymd[3]||0,0|n.inymd[4]||0,0|n.inymd[5]||0],t.each([0,1,2],function(t){n.hmsin[t].value=n.digit(n.timeVoid(s.times[t],t)?0|n.mins[t+3]:0|s.times[t])}),t(o.ok)[n.valid?"removeClass":"addClass"](o[1])},n.festival=function(t,e){var a;switch(e){case"1.1":a="元旦";break;case"3.8":a="妇女";break;case"4.5":a="清明";break;case"5.1":a="劳动";break;case"6.1":a="儿童";break;case"9.10":a="教师";break;case"10.1":a="国庆"}a&&(t.innerHTML=a),a=null},n.viewYears=function(e){var a="";t.each(new Array(14),function(t){a+=7===t?"<li "+(parseInt(o.year.value)===e?'class="'+o[2]+'"':"")+' y="'+e+'">'+e+"年</li>":'<li y="'+(e-7+t)+'">'+(e-7+t)+"年</li>"}),t("#laydate_ys").html(a),t("#laydate_ys li").each(function(){"y"===n.checkVoid(t(this).attr("y"))[0]?t(this).addClass(o[1]):t(this).on("click",function(e){e.stopPropagation(),n.reshow(),n.viewDate(0|t(this).attr("y"),n.ymd[1],n.ymd[2])})})},n.initDate=function(){var e=new Date,a=t(n.elem).val(),s=a.match(/\d+/g)||[],o=n.options?n.options.format:i.format;""==t.trim(a)?s=[e.getFullYear(),e.getMonth()+1,e.getDate()]:s.length<3&&(o.match(/YYYY/g)?""==n.options.start?s.push("01"):(s=n.options.start.match(/\d+/g)||[],s.length<3&&(s=[e.getFullYear(),e.getMonth()+1,e.getDate()])):s.unshift(e.getFullYear())),n.inymd=s,n.viewDate(s[0],s[1]-1,s[2])},n.iswrite=function(){var e={time:t("#laydate_hms")};e.time[n.options.istime?"show":"hide"](),t(o.oclear)["isclear"in n.options&&n.options.isclear===!1?"hide":"show"](),t(o.otoday)["istoday"in n.options&&n.options.istoday===!1?"hide":"show"](),t(o.ok)["issure"in n.options&&n.options.issure===!1?"hide":"show"]()},n.orien=function(e,a){var i,s=t(n.elem)[0].getBoundingClientRect();e.css("left",s.left+(a?0:n.scroll(1))+"px"),i=s.bottom+e[0].offsetHeight/1.5<=n.winarea()?s.bottom-1:s.top>e[0].offsetHeight/1.5?s.top-e[0].offsetHeight+1:n.winarea()-e[0].offsetHeight,e.css("top",Math.max(i+(a?0:n.scroll()),1)+"px")},n.follow=function(e){n.options.fixed?(t(e).css("position","fixed"),n.orien(e,1)):(t(e).css("position","absolute"),n.orien(e))},n.viewtb=function(){var e,a=[],i=["日","一","二","三","四","五","六"],n={},s=t("<div />"),o=t("<table />"),l=t("<thead />");return n.creath=function(e){var a=t("<th>"+i[e]+"</th>");l.append(a),a=null},t.each(new Array(6),function(i){a.push([]),e=t("<tr />"),t.each(new Array(7),function(t){a[i][t]=0,0===i&&n.creath(t),e.append("<td>"+t+"</td>")}),o.append(e)}),o.attr({id:"laydate_table","class":"laydate_table"}).prepend(l).appendTo(s),e=a=null,s.html()}(),n.view=function(e,a){var l,d={};a=a||e,n.elem=t(e),n.options=a,n.options.format||(n.options.format=i.format),n.options.start=n.options.start||"",n.mm=d.mm=[n.options.min||i.min,n.options.max||i.max],n.mins=d.mm[0].match(/\d+/g),n.maxs=d.mm[1].match(/\d+/g),o.elemv=/textarea|input/i.test(n.elem[0].tagName)?"val":"html",n.box||(l=t('<div id="'+o[0]+'" class="'+o[0]+'" />').css("position","absolute").hide(),d.html='<div class="laydate_top"><div class="laydate_ym laydate_y" id="laydate_YY"><a class="laydate_choose laydate_chprev laydate_tab"><cite></cite></a><input id="laydate_y" readonly><label></label><a class="laydate_choose laydate_chnext laydate_tab"><cite></cite></a><div class="laydate_yms"><a class="laydate_tab laydate_chtop"><cite></cite></a><ul id="laydate_ys"></ul><a class="laydate_tab laydate_chdown"><cite></cite></a></div></div><div class="laydate_ym laydate_m" id="laydate_MM"><a class="laydate_choose laydate_chprev laydate_tab"><cite></cite></a><input id="laydate_m" readonly><label></label><a class="laydate_choose laydate_chnext laydate_tab"><cite></cite></a><div class="laydate_yms" id="laydate_ms">'+function(){var e="";return t.each(new Array(12),function(t){e+='<span m="'+t+'">'+n.digit(t+1)+"月</span>"}),e}()+"</div></div></div>"+n.viewtb+'<div class="laydate_bottom"><ul id="laydate_hms"><li class="laydate_sj">时间</li><li><input readonly>:</li><li><input readonly>:</li><li><input readonly></li></ul><div class="laydate_time" id="laydate_time"></div><div class="laydate_btn"><a id="laydate_clear">清空</a><a id="laydate_today">今天</a><a id="laydate_ok">确认</a></div></div>',l.html(d.html),a.skin&&"string"==typeof a.skin&&"default"!==a.skin&&l.addClass(o[0]+"_"+a.skin),s.append(l),n.box=l,n.events(),l=null),n.follow(t(n.box).attr("class",function(){return o[0]+("default"===a.skin?"":" "+o[0]+"_"+a.skin)}).show()),a.zIndex?t(n.box).css("z-index",a.zIndex):t(n.box).css("z-index","auto"),n.stopMosup("click",n.box),n.initDate(),n.iswrite(),n.check()},n.reshow=function(){return t("#"+o[0]+" .laydate_show").removeClass("laydate_show"),this},n.close=function(){var e=t.Event("close.ui.datetimepicker",{relateTarget:n.elem});n.reshow(),t("#"+o[0]).hide(),t(n.elem).trigger(e),n.elem=null},n.parse=function(t,e,a){return t=t.concat(e),a=a||(n.options?n.options.format:i.format),a.match(/YYYY/g)||t.shift(),a.replace(/YYYY|MM|DD|hh|mm|ss/g,function(e,a){return t.index=0|++t.index,n.digit(t[t.index])})},n.creation=function(e,a){var i=n.hmsin,s=n.parse(e,[i[0].value,i[1].value,i[2].value]),l=n.elem;if(n.elem[o.elemv](s),!a){n.close(),"function"==typeof n.options.choose&&n.options.choose(s);var d=t.Event("choose.ui.datetimepicker",{relatedTarget:l});l.trigger(d,s)}},n.events=function(){var e={box:"#"+o[0]};s.addClass("laydate_body"),o.tds=t("#laydate_table td"),o.mms=t("#laydate_ms span"),o.year=t("#laydate_y"),o.month=t("#laydate_m"),t(e.box).on("click"," .laydate_ym",function(a){a.stopPropagation();var i=t(this).index();n.reshow(),t(this).find("div").eq(0).addClass("laydate_show"),i||(e.YY=parseInt(o.year.val()),n.viewYears(e.YY))}),t(e.box).on("click",t.proxy(n.reshow,n)),e.tabYear=function(t){0===t?n.ymd[0]--:1===t?n.ymd[0]++:2===t?e.YY-=14:e.YY+=14,2>t?(n.viewDate(n.ymd[0],n.ymd[1],n.ymd[2]),n.reshow()):n.viewYears(e.YY)},t("#laydate_YY .laydate_tab").each(function(a){t(this).on("click",function(t){t.stopPropagation(),e.tabYear(a)})}),e.tabMonth=function(t){t?(n.ymd[1]++,12===n.ymd[1]&&(n.ymd[0]++,n.ymd[1]=0)):(n.ymd[1]--,-1===n.ymd[1]&&(n.ymd[0]--,n.ymd[1]=11)),n.viewDate(n.ymd[0],n.ymd[1],n.ymd[2])},t("#laydate_MM").on("click",".laydate_tab",function(a){a.stopPropagation();var i=t(this).index();n.reshow(),e.tabMonth(i)}),t("#laydate_ms").on("click","span",function(e){e.stopPropagation(),t(this).hasClass(o[1])||n.viewDate(n.ymd[0],0|t(this).attr("m"),n.ymd[2])}),t("#laydate_table").on("click","td",function(e){t(this).hasClass(o[1])||(e.stopPropagation(),n.creation([0|t(this).attr("y"),0|t(this).attr("m"),0|t(this).attr("d")]))}),o.oclear=t("#laydate_clear").on("click",function(){n.elem[o.elemv](""),n.close()}),o.otoday=t("#laydate_today").on("click",function(){var t=new Date;n.creation([t.getFullYear(),t.getMonth()+1,t.getDate()])}),o.ok=t("#laydate_ok").on("click",function(){n.valid&&n.creation([n.ymd[0],n.ymd[1]+1,n.ymd[2]])}),e.times=t("#laydate_time"),n.hmsin=e.hmsin=t("#laydate_hms input"),e.hmss=["小时","分钟","秒数"],e.hmsarr=[],n.msg=function(a,i){var n='<div class="laydte_hsmtex">'+(i||"提示")+"<span>×</span></div>";"string"==typeof a?(n+="<p>"+a+"</p>",t("#"+o[0]).show(),t(e.times).removeClass("laydate_time1").addClass("laydata_msg")):(e.hmsarr[a]?n=e.hmsarr[a]:(n+='<div id="laydate_hmsno" class="laydate_hmsno">',t.each(new Array(0===a?24:60),function(t){n+="<span>"+t+"</span>"}),n+="</div>",e.hmsarr[a]=n),t(e.times).removeClass("laydate_msg"),t(e.times)[0===a?"removeClass":"addClass"]("laydate_time1")),t(e.times).addClass("laydate_show").html(n)},e.hmson=function(e,a){var i=t("#laydate_hmsno span"),s=n.valid?null:1;i.each(function(e){(s||n.timeVoid(e,a))&&t(this).addClass(o[1])}).on("click",function(){t(this).hasClass(o[1])||(e.value=n.digit(t(this).html()||0))}),t(i).eq(e.value||0).addClass("laydate_click")},t(e.hmsin).each(function(a){t(this).on("click",function(t){t.stopPropagation(),n.reshow(),n.msg(a,e.hmss[a]),e.hmson(this,a)})}),t(document).on("mouseup",function(e){var a=t("#"+o[0]);a&&a.length>0&&a.is(":visible")&&(n.check()||n.close())}).on("mousedown",function(t){13===t.which&&n.elem&&n.elem.length>0&&n.creation([n.ymd[0],n.ymd[1]+1,n.ymd[2]])})},l.reset=function(){n.box&&n.box.length&&n.elem&&n.follow(n.box)},l.now=function(t,e){var a=new Date(0|t?function(t){return 864e5>t?+new Date+864e5*t:t}(parseInt(t)):+new Date);return n.parse([a.getFullYear(),a.getMonth()+1,a.getDate()],[a.getHours(),a.getMinutes(),a.getSeconds()],e)},e.prototype.show=function(e){e=t.extend({elem:this.$element,event:"focus"},this.option,e),l(e)},e.VERSION="1.0.0",t.fn.datetimepicker=a,t.fn.datetimepicker.constructor=e;var d=function(e){e.preventDefault(),t(this).one("close.ui.datetimepicker",function(){t(this).hasClass("active")&&t(this).removeClass("active"),t(this).parent(".form-control-date").hasClass("active")&&t(this).parent(".form-control-date").removeClass("active")}).one("show.ui.datetimepicker",function(){t(this).parent(".form-control-date").length&&t(this).parent(".form-control-date").addClass("active")}),a.call(t(this),"show")};t(function(){var e=window.navigator.userAgent;if(/msie/gi.test(e)){var a=t("<input />").hide().appendTo(t(document.body));l({elem:a[0]}),n.close(),a.remove()}t(document).on("click.ui.datetimepicker",function(e){var a=e.target;t(a).is('[data-toggle="datetimepicker"]')&&d.call(a,e)})})}(jQuery);